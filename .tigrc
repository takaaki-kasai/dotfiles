# 公式で用意されているVim風のプリセットを読み込む
source ~/.tigrc.vim

# generic なキーバインド
bind generic ca !?sh -c "echo 'Amending previous commit...'; git commit --amend"
bind generic d none
bind generic dd view-diff
bind generic y none
bind generic yl view-stash
bind generic K none
bind generic H view-help

# main view のキーバインド
bind generic D none
bind generic F none
bind main r none
bind main t none
bind main m none
bind main M view-main
bind main t view-refs
bind main w view-tree
bind main G move-last-line
bind main F !sh -c "echo 'Fetching...'; git fetchall"
bind main P !?sh -c "echo 'Pushing...'; git pushall %(branch)"
bind main C !@?git checkout %(branch)
bind main D !@?git branch -d %(branch)
bind main ! !@?git branch -D %(branch)
bind main mm !@?git merge --no-ff %(branch)
bind main mf !@?git merge --ff-only %(commit)
bind main BB !@?git rebase %(commit)
bind main BI !?sh -c "echo 'Starting interactive rebase...'; git rebase -i %(commit)"
bind main di :!git diff -M100% %(commit)~..%(commit)
bind main dI :!git diff -M100% %(commit)..HEAD
bind main dl :!git diff -M100% --name-status %(commit)~..%(commit)
bind main dL :!git diff -M100% --name-status %(commit)..HEAD
bind main dt !git difftool -M100% %(commit)~..%(commit)
bind main dT !git difftool -M100% %(commit)..HEAD
bind main ds !git difftool -M100% --cached
bind main du !git difftool -M100%
bind main rr !@?git reset %(commit)
bind main rs !@?git reset --soft %(commit)
bind main rh !@?git reset --hard %(commit)
bind main yy !@git stash
bind main yp !@git stash pop

# refs view のキーバインド
bind refs D none
bind refs D !@?git branch -d %(branch)
bind refs ! !@?git branch -D %(branch)
bind refs C !@?git checkout %(branch)
bind refs M !?git merge %(ref)

# status view のキーバインド
bind status ap !git add -p

# タイプ別のリファレンスの表示形式。スペース区切りで指定
# set reference-format = [branch] <tag> {remote} ~replace~
set reference-format = [branch] [->head] <tag> <(local-tag)> {remote} {->tracked-remote} ~replace~

# メインビューにコミットIDを出す
set main-view-id = yes,width=8

# コミットグラフのタイプを指定
set line-graphics = utf-8

# git diff のオプションを指定
set diff-options = -w -M100%

# コミットの並び順
# set commit-order = date

# 描画更新のタイミング
# set refresh-mode = after-command
